import random
import numpy as np
from server.default_params import Tower


def make_decision(probability: float) -> bool:
    if probability > 1:
        probability = 1
    if probability < 0:
        probability = 0
    return np.random.choice([True, False], p=[probability, 1 - probability])


def make_decision_list(keys: list, values: list, cnt: int) -> list:
    keys.append(None)
    values.append(1 - sum(values))
    return np.random.choice(keys, cnt, p=values)


class RandomUtil:
    NAME_XING = ['èµµ', 'é’±', 'å­™', 'æ', 'å‘¨', 'å´', 'éƒ‘', 'ç‹', 'å†¯', 'é™ˆ', 'è¤š', 'å«', 'è’‹', 'æ²ˆ', 'éŸ©', 'æ¨', 'æœ±',
                 'ç§¦', 'å°¤', 'è®¸',
                 'ä½•', 'å•', 'æ–½', 'å¼ ', 'å­”', 'æ›¹', 'ä¸¥', 'å', 'é‡‘', 'é­', 'é™¶', 'å§œ', 'æˆš', 'è°¢', 'é‚¹', 'å–»', 'æŸ',
                 'æ°´', 'çª¦', 'ç« ',
                 'äº‘', 'è‹', 'æ½˜', 'è‘›', 'å¥š', 'èŒƒ', 'å½­', 'éƒ', 'é²', 'éŸ¦', 'æ˜Œ', 'é©¬', 'è‹—', 'å‡¤', 'èŠ±', 'æ–¹', 'ä¿',
                 'ä»»', 'è¢', 'æŸ³',
                 'é…†', 'é²', 'å²', 'å”', 'è´¹', 'å»‰', 'å²‘', 'è–›', 'é›·', 'è´º', 'å€ª', 'æ±¤', 'æ»•', 'æ®·', 'ç½—', 'æ¯•', 'éƒ',
                 'é‚¬', 'å®‰', 'å¸¸',
                 'ä¹', 'äº', 'æ—¶', 'å‚…', 'çš®', 'å', 'é½', 'åº·', 'ä¼', 'ä½™', 'å…ƒ', 'åœ', 'é¡¾', 'å­Ÿ', 'å¹³', 'é»„', 'å’Œ',
                 'ç©†', 'è§', 'å°¹',
                 'å§š', 'é‚µ', 'æ¹›', 'æ±ª', 'ç¥', 'æ¯›', 'ç¦¹', 'ç‹„', 'ç±³', 'è´', 'æ˜', 'è‡§', 'è®¡', 'ä¼', 'æˆ', 'æˆ´', 'è°ˆ',
                 'å®‹', 'èŒ…', 'åº',
                 'ç†Š', 'çºª', 'èˆ’', 'å±ˆ', 'é¡¹', 'ç¥', 'è‘£', 'æ¢', 'æœ', 'é˜®', 'è“', 'é—µ', 'å¸­', 'å­£', 'éº»', 'å¼º', 'è´¾',
                 'è·¯', 'å¨„', 'å±',
                 'æ±Ÿ', 'ç«¥', 'é¢œ', 'éƒ­', 'æ¢…', 'ç››', 'æ—', '***', 'é”º', 'å¾', 'ä¸˜', 'éª†', 'é«˜', 'å¤', 'è”¡', 'ç”°', 'æ¨Š',
                 'èƒ¡', 'å‡Œ', 'éœ',
                 'è™', 'ä¸‡', 'æ”¯', 'æŸ¯', 'æ˜', 'ç®¡', 'å¢', 'è«', 'ç»', 'æˆ¿', 'è£˜', 'ç¼ª', 'å¹²', 'è§£', 'åº”', 'å®—', 'ä¸',
                 'å®£', 'è´²', 'é‚“',
                 'éƒ', 'å•', 'æ­', 'æ´ª', 'åŒ…', 'è¯¸', 'å·¦', 'çŸ³', 'å´”', 'å‰', 'é’®', 'é¾š', 'ç¨‹', 'åµ‡', 'é‚¢', 'æ»‘', 'è£´',
                 'é™†', 'è£', 'ç¿',
                 'è€', 'ç¾Š', 'æ–¼', 'æƒ ', 'ç”„', 'éº¹', 'å®¶', 'å°', 'èŠ®', 'ç¾¿', 'å‚¨', 'é³', 'æ±²', 'é‚´', 'ç³œ', 'æ¾', 'äº•',
                 'æ®µ', 'å¯Œ', 'å·«',
                 'ä¹Œ', 'ç„¦', 'å·´', 'å¼“', 'ç‰§', 'éš—', 'å±±', 'è°·', 'è½¦', 'ä¾¯', 'å®“', 'è“¬', 'å…¨', 'éƒ—', 'ç­', 'ä»°', 'ç§‹',
                 'ä»²', 'ä¼Š', 'å®«',
                 'ç”¯', 'ä»‡', 'æ ¾', 'æš´', 'ç”˜', 'é’­', 'å‰', 'æˆ', 'ç¥–', 'æ­¦', 'ç¬¦', 'åˆ˜', 'æ™¯', 'è©¹', 'æŸ', 'é¾™', 'å¶',
                 'å¹¸', 'å¸', 'éŸ¶',
                 'éƒœ', 'é»', 'è“Ÿ', 'è–„', 'å°', 'å®¿', 'ç™½', 'æ€€', 'è’²', 'é‚°', 'ä»', 'é„‚', 'ç´¢', 'å’¸', 'ç±', 'èµ–', 'å“',
                 'è”º', 'å± ', 'è’™',
                 'æ± ', 'ä¹”', 'é˜´', 'é¬±', 'èƒ¥', 'èƒ½', 'è‹', 'åŒ', 'é—»', 'è˜', 'å…š', 'ç¿Ÿ', 'è°­', 'è´¡', 'åŠ³', 'é€„', 'å§¬',
                 'ç”³', 'æ‰¶', 'å µ',
                 'å†‰', 'å®°', 'éƒ¦', 'é›', 'éƒ¤', 'ç’©', 'æ¡‘', 'æ¡‚', 'æ¿®', 'ç‰›', 'å¯¿', 'é€š', 'è¾¹', 'æ‰ˆ', 'ç‡•', 'å†€', 'éƒ',
                 'æµ¦', 'å°š', 'å†œ',
                 'æ¸©', 'åˆ«', 'åº„', 'æ™', 'æŸ´', 'ç¿', 'é˜', 'å……', 'æ…•', 'è¿', 'èŒ¹', 'ä¹ ', 'å®¦', 'è‰¾', 'é±¼', 'å®¹', 'å‘',
                 'å¤', 'æ˜“', 'æ…',
                 'æˆˆ', 'å»–', 'åº¾', 'ç»ˆ', 'æš¨', 'å±…', 'è¡¡', 'æ­¥', 'éƒ½', 'è€¿', 'æ»¡', 'å¼˜', 'åŒ¡', 'å›½', 'æ–‡', 'å¯‡', 'å¹¿',
                 'ç¦„', 'é˜™', 'ä¸œ',
                 'æ¬§', 'æ®³', 'æ²ƒ', 'åˆ©', 'è”š', 'è¶Š', 'å¤”', 'éš†', 'å¸ˆ', 'å·©', 'å', 'è‚', 'æ™', 'å‹¾', 'æ•–', 'è', 'å†·',
                 'è¨¾', 'è¾›', 'é˜š',
                 'é‚£', 'ç®€', 'é¥¶', 'ç©º', 'æ›¾', 'æ¯‹', 'æ²™', 'ä¹œ', 'å…»', 'é ', 'é¡»', 'ä¸°', 'å·¢', 'å…³', 'è’¯', 'ç›¸', 'æŸ¥',
                 'å', 'è†', 'çº¢',
                 'æ¸¸', 'ç«º', 'æƒ', 'é€¯', 'ç›–', 'ç›Š', 'æ¡“', 'å…¬', 'ä¸‡ä¿Ÿ', 'å¸é©¬', 'ä¸Šå®˜', 'æ¬§é˜³', 'å¤ä¾¯', 'è¯¸è‘›', 'é—»äºº',
                 'ä¸œæ–¹', 'èµ«è¿', 'çš‡ç”«',
                 'å°‰è¿Ÿ', 'å…¬ç¾Š', 'æ¾¹å°', 'å…¬å†¶', 'å®—æ”¿', 'æ¿®é˜³', 'æ·³äº', 'å•äº', 'å¤ªå”', 'ç”³å± ', 'å…¬å­™', 'ä»²å­™', 'è½©è¾•',
                 'ä»¤ç‹', 'é”ºç¦»', 'å®‡æ–‡',
                 'é•¿å­™', 'æ…•å®¹', 'é²œäº', 'é—¾ä¸˜', 'å¸å¾’', 'å¸ç©º', 'äº“å®˜', 'å¸å¯‡', 'ä»‰', 'ç£', 'å­è½¦', 'é¢›å­™', 'ç«¯æœ¨',
                 'å·«é©¬', 'å…¬è¥¿', 'æ¼†é›•', 'ä¹æ­£',
                 'å£¤é©·', 'å…¬è‰¯', 'æ‹“è·‹', 'å¤¹è°·', 'å®°çˆ¶', 'ç©€æ¢', 'æ™‹', 'æ¥š', 'é—«', 'æ³•', 'æ±', 'é„¢', 'æ¶‚', 'é’¦', 'æ®µå¹²',
                 'ç™¾é‡Œ', 'ä¸œéƒ­', 'å—é—¨',
                 'å‘¼å»¶', 'å½’æµ·', 'ç¾ŠèˆŒ', 'å¾®ç”Ÿ', 'å²³', 'å¸…', 'ç¼‘', 'äº¢', 'å†µ', 'å¾Œ', 'æœ‰', 'ç´', 'æ¢ä¸˜', 'å·¦ä¸˜', 'ä¸œé—¨',
                 'è¥¿é—¨', 'å•†', 'ç‰Ÿ',
                 'ä½˜', 'ä½´', 'ä¼¯', 'èµ', 'å—å®«', 'å¢¨', 'å“ˆ', 'è°¯', 'ç¬ª', 'å¹´', 'çˆ±', 'é˜³', 'ä½Ÿ', 'ç¬¬äº”', 'è¨€', 'ç¦']

    MING = ['å£®', 'æ˜±æ°', 'å¼€è™', 'å‡¯ä¿¡', 'æ°¸æ–Œ', 'æ–¹æ´²', 'é•¿å‘', 'å¯äºº', 'å¤©å¼˜', 'ç‚«é”', 'å¯Œæ˜', 'ä¿Šæ«', 'å°ç‰', 'è“',
            'ç¬éƒ¡', 'ç›é’', 'äºˆèˆ´', 'å¦™å¦™', 'æ¢“èŒµ', 'æµ·è“‰', 'è¯­å¨œ', 'é¦¨ç¦', 'æ™“é¦¥', 'ä½³ç¿Š']

    @staticmethod
    def random_name_str():
        if random.choice([True, False]):
            while True:
                xing_two = RandomUtil.NAME_XING[random.randint(0, len(RandomUtil.NAME_XING) - 1)]
                if len(xing_two) == 2:
                    xing = xing_two
                    break
        else:
            while True:
                xing_one = RandomUtil.NAME_XING[random.randint(0, len(RandomUtil.NAME_XING) - 1)]
                if len(xing_one) == 1:
                    xing = xing_one
                    break

        ming = RandomUtil.MING[random.randint(0, len(RandomUtil.MING) - 1)]

        return xing + ming


def head(title) -> str:
    space_cnt = 13 - len(title)
    space = " " * space_cnt
    return f"\n{space}ğŸ’«ã€Œ{title}ã€ğŸ’«\n----------------------------\n"


def separate(title) -> str:
    cnt = 12 - len(title) // 2
    pre = "-" * cnt
    return f"\n{pre}{title}{pre}\n"


def gen_ico(tower_level: int) -> str:
    star_cnt = (tower_level - 1) // Tower.tower_max
    moon_cnt = star_cnt // 4
    star_cnt -= moon_cnt * 4
    sun_cnt = moon_cnt // 4
    moon_cnt -= sun_cnt * 4
    crown_cnt = sun_cnt // 4
    sun_cnt -= crown_cnt * 4
    boom_cnt = crown_cnt // 4
    crown_cnt -= boom_cnt * 4
    star = star_cnt * "â­"
    moon = moon_cnt * "ğŸŒ™"
    sun = sun_cnt * "â˜€ï¸"
    crown = crown_cnt * "ğŸ‘‘"
    boom = boom_cnt * "ğŸ’¥"
    return boom + crown + sun + moon + star


white_code = "â¡"


def filter_num(num: int) -> str:
    num_str = str(num)
    if len(num_str) < 5:
        return num_str
    return white_code.join(num_str[i:i + 4] for i in range(0, len(num_str), 4))


if __name__ == '__main__':
    pass
